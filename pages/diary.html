<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="–ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫ –æ–±—É—á–µ–Ω–∏—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ - –∑–∞–ø–∏—Å–∏ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è—Ö">
    <title>–î–Ω–µ–≤–Ω–∏–∫ –æ–±—É—á–µ–Ω–∏—è - –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –°—Ç—É–¥–µ–Ω—Ç–∞</title>
    <link rel="stylesheet" href="../styles/styles.css">
    <link rel="stylesheet" href="../accessibility.js">
</head>
<body>
    <a class="skip-link" href="#main">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>

    <div class="page">
        <header class="header" role="banner">
            <div class="container header__container">
                <div class="logo">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –°—Ç—É–¥–µ–Ω—Ç–∞</div>
                <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-pressed="false">
                    <span class="theme-icon" aria-hidden="true">üåô</span>
                </button>
            </div>
        </header>

        <nav class="nav" role="navigation" aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
            <div class="container">
                <ul class="nav__list">
                    <li><a href="../index.html" class="nav__link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="projects.html" class="nav__link">–ü—Ä–∞–∫—Ç–∏–∫–∏</a></li>
                    <li><a href="diary.html" class="nav__link" aria-current="page">–ù–æ–≤–æ—Å—Ç–∏</a></li>
                    <li><a href="contacts.html" class="nav__link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                </ul>
            </div>
        </nav>

        <main id="main" class="main" role="main">
            <section class="section" aria-labelledby="diary-title">
                <div class="container">
                    <h1 id="diary-title" class="section-title">–î–Ω–µ–≤–Ω–∏–∫ –º–æ–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è</h1>
                    
                    <div class="diary-header">
                        <p class="diary-intro">–ó–¥–µ—Å—å —è —Ñ–∏–∫—Å–∏—Ä—É—é —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∏–∑—É—á–µ–Ω–∏–∏ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –æ—Ç—Ä–∞–∂–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è –∏ –Ω–∞–≤—ã–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–ª—É—á–∞—é.</p>
                        <button class="button button--primary" id="addEntryBtn" aria-label="–û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫">
                            <span class="button-icon" aria-hidden="true">‚ûï</span>
                            –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
                        </button>
                    </div>

                    <div class="diary-entries" role="list" aria-label="–°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –¥–Ω–µ–≤–Ω–∏–∫–∞">
                        <article class="diary-entry" role="listitem">
                            <div class="diary-entry__header">
                                <h3 class="diary-entry__title">–í–µ—Ä—Å—Ç–∫–∞ –º–∞–∫–µ—Ç–∞ —Å–∞–π—Ç–∞</h3>
                                <div class="diary-entry__actions">
                                    <span class="diary-entry__status status--completed">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                                </div>
                            </div>
                            <p class="diary-entry__date"><time datetime="2025-11-10">10 –Ω–æ—è–±—Ä—è 2025</time></p>
                            <p class="diary-entry__description">–£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª –≤–µ—Ä—Å—Ç–∫—É –º–∞–∫–µ—Ç–∞ —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º. –ü—Ä–∏–º–µ–Ω–∏–ª Grid –∏ Flexbox –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.</p>
                            <div class="diary-entry__progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 100 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                                    <div class="progress-bar__fill" style="--progress: 100%;"></div>
                                </div>
                            </div>
                        </article>

                        <article class="diary-entry" role="listitem">
                            <div class="diary-entry__header">
                                <h3 class="diary-entry__title">–ò–∑—É—á–µ–Ω–∏–µ JavaScript</h3>
                                <div class="diary-entry__actions">
                                    <span class="diary-entry__status status--completed">‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                                </div>
                            </div>
                            <p class="diary-entry__date"><time datetime="2025-11-05">5 –Ω–æ—è–±—Ä—è 2025</time></p>
                            <p class="diary-entry__description">–ò–∑—É—á–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ JavaScript: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–±—ã—Ç–∏—è. –°–æ–∑–¥–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.</p>
                            <div class="diary-entry__progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 100 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                                    <div class="progress-bar__fill" style="--progress: 100%;"></div>
                                </div>
                            </div>
                        </article>

                        <article class="diary-entry" role="listitem">
                            <div class="diary-entry__header">
                                <h3 class="diary-entry__title">–†–∞–±–æ—Ç–∞ —Å —Ñ–æ—Ä–º–∞–º–∏</h3>
                                <div class="diary-entry__actions">
                                    <span class="diary-entry__status status--progress">‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                                </div>
                            </div>
                            <p class="diary-entry__date"><time datetime="2025-11-08">8 –Ω–æ—è–±—Ä—è 2025</time></p>
                            <p class="diary-entry__description">–ò–∑—É—á–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –†–∞–∑–±–∏—Ä–∞—é—Å—å —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤.</p>
                            <div class="diary-entry__progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 65 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                                    <div class="progress-bar__fill" style="--progress: 65%;"></div>
                                </div>
                            </div>
                        </article>

                        <article class="diary-entry" role="listitem">
                            <div class="diary-entry__header">
                                <h3 class="diary-entry__title">–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞</h3>
                                <div class="diary-entry__actions">
                                    <span class="diary-entry__status status--progress">‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                                </div>
                            </div>
                            <p class="diary-entry__date"><time datetime="2025-11-01">1 –Ω–æ—è–±—Ä—è 2025</time></p>
                            <p class="diary-entry__description">–ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –º–∞–∫–µ—Ç–æ–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ò–∑—É—á–∞—é –º–µ–¥–∏–∞–∑–∞–ø—Ä–æ—Å—ã –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.</p>
                            <div class="diary-entry__progress">
                                <div class="progress-bar" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: 80 –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                                    <div class="progress-bar__fill" style="--progress: 80%;"></div>
                                </div>
                            </div>
                        </article>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer" role="contentinfo">
            <div class="container footer__container">
                <p class="footer__copyright">&copy; 2025 –°–∞–±–ª–∏–Ω –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤–∏—á. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <nav class="footer__links" aria-label="–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏">
                    <a href="https://github.com/sablin1412" target="_blank" rel="noopener noreferrer" class="footer__link" aria-label="GitHub –ø—Ä–æ—Ñ–∏–ª—å (–æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ)">GitHub</a>
                    <a href="mailto:ivansablin90@gmail.com" class="footer__link" aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å email">Email</a>
                </nav>
            </div>
        </footer>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ -->
    <div id="addEntryModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="addEntryModalTitle" aria-describedby="addEntryModalDesc" hidden>
        <div class="modal__overlay" data-close-modal-diary aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ"></div>
        <div class="modal__content modal__content--diary" tabindex="-1">
            <button class="modal__close" data-close-modal-diary aria-label="–ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ">&times;</button>
            
            <div class="modal__header">
                <h2 id="addEntryModalTitle" class="modal__title"><span aria-hidden="true">üìù</span> –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</h2>
                <p id="addEntryModalDesc" class="modal__subtitle">–û–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –æ–±—É—á–µ–Ω–∏–∏</p>
            </div>

            <form id="addEntryForm" class="diary-form" novalidate aria-label="–§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –¥–Ω–µ–≤–Ω–∏–∫">
                <div class="form-group">
                    <label for="entryTitle" class="form-label">
                        <span class="label-text">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏</span>
                        <span class="required" aria-hidden="true">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="entryTitle" 
                        name="entryTitle" 
                        class="form-input" 
                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–∑—É—á–µ–Ω–∏–µ React Hooks"
                        required
                        aria-required="true"
                        aria-describedby="entryTitle-hint"
                        maxlength="100">
                    <span id="entryTitle-hint" class="input-hint">–ú–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤</span>
                </div>

                <div class="form-group">
                    <label for="entryDescription" class="form-label">
                        <span class="label-text">–û–ø–∏—Å–∞–Ω–∏–µ</span>
                        <span class="required" aria-hidden="true">*</span>
                    </label>
                    <textarea 
                        id="entryDescription" 
                        name="entryDescription" 
                        class="form-textarea" 
                        rows="5" 
                        placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏—Ç–µ, —á–µ–º—É –≤—ã –Ω–∞—É—á–∏–ª–∏—Å—å –∏–ª–∏ –Ω–∞–¥ —á–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç–µ..."
                        required
                        aria-required="true"
                        aria-describedby="entryDescription-hint"
                        maxlength="500"></textarea>
                    <span id="entryDescription-hint" class="input-hint">–ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤</span>
                </div>

                <div class="form-group">
                    <label for="entryProgress" class="form-label">
                        <span class="label-text">–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</span>
                        <span class="progress-value" id="progressValue" aria-live="polite">50%</span>
                    </label>
                    <input 
                        type="range" 
                        id="entryProgress" 
                        name="entryProgress" 
                        class="form-range" 
                        min="0" 
                        max="100" 
                        value="50"
                        step="5"
                        aria-label="–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç 0 –¥–æ 100"
                        aria-valuemin="0"
                        aria-valuemax="100"
                        aria-valuenow="50">
                    <div class="range-labels" aria-hidden="true">
                        <span>0%</span>
                        <span>25%</span>
                        <span>50%</span>
                        <span>75%</span>
                        <span>100%</span>
                    </div>
                </div>

                <fieldset class="form-group">
                    <legend class="form-label">
                        <span class="label-text">–°—Ç–∞—Ç—É—Å</span>
                        <span class="required" aria-hidden="true">*</span>
                    </legend>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input 
                                type="radio" 
                                name="entryStatus" 
                                value="progress" 
                                checked
                                class="radio-input"
                                aria-checked="true">
                            <span class="radio-custom"></span>
                            <span class="radio-text"><span aria-hidden="true">‚è≥</span> –í –ø—Ä–æ—Ü–µ—Å—Å–µ</span>
                        </label>
                        <label class="radio-label">
                            <input 
                                type="radio" 
                                name="entryStatus" 
                                value="completed"
                                class="radio-input"
                                aria-checked="false">
                            <span class="radio-custom"></span>
                            <span class="radio-text"><span aria-hidden="true">‚úì</span> –ó–∞–≤–µ—Ä—à–µ–Ω–æ</span>
                        </label>
                    </div>
                </fieldset>

                <div class="form-actions">
                    <button type="button" class="button button--secondary" data-close-modal-diary>
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="button button--primary">
                        <span class="button-icon" aria-hidden="true">üíæ</span>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
    <div id="notifications" class="notifications-container" role="status" aria-live="polite" aria-atomic="true"></div>

    <script src="../scripts/script.js"></script>
    <script>
        // ==================== –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –î–ù–ï–í–ù–ò–ö–ê –° LOCALSTORAGE ====================

        document.addEventListener('DOMContentLoaded', function() {
            const addEntryBtn = document.getElementById('addEntryBtn');
            const addEntryModal = document.getElementById('addEntryModal');
            const addEntryForm = document.getElementById('addEntryForm');
            const closeButtons = document.querySelectorAll('[data-close-modal-diary]');
            const progressInput = document.getElementById('entryProgress');
            const progressValue = document.getElementById('progressValue');
            const entriesList = document.querySelector('.diary-entries');

            if (!addEntryBtn || !addEntryModal) return;

            // –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–ø–∏—Å–µ–π –∏–∑ localStorage –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            loadDiaryEntries();

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            if (progressInput && progressValue) {
                progressInput.addEventListener('input', function() {
                    const value = this.value;
                    progressValue.textContent = value + '%';
                    this.setAttribute('aria-valuenow', value);
                });
            }

            // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            addEntryBtn.addEventListener('click', function() {
                openDiaryModal();
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            closeButtons.forEach(btn => {
                btn.addEventListener('click', closeDiaryModal);
            });

            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && !addEntryModal.hasAttribute('hidden')) {
                    closeDiaryModal();
                }
            });

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã
            if (addEntryForm) {
                addEntryForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫
                    document.querySelectorAll('.error-message').forEach(el => el.remove());
                    document.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));
                    document.querySelectorAll('[aria-invalid="true"]').forEach(el => el.setAttribute('aria-invalid', 'false'));
                    
                    const title = document.getElementById('entryTitle');
                    const description = document.getElementById('entryDescription');
                    const progress = document.getElementById('entryProgress');
                    const status = document.querySelector('input[name="entryStatus"]:checked');
                    
                    let isValid = true;
                    let firstInvalidField = null;
                    
                    // –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è
                    if (title.value.trim().length < 3) {
                        showError(title, '–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞');
                        isValid = false;
                        if (!firstInvalidField) firstInvalidField = title;
                    }
                    
                    // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
                    if (description.value.trim().length < 10) {
                        showError(description, '–û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤');
                        isValid = false;
                        if (!firstInvalidField) firstInvalidField = description;
                    }
                    
                    if (isValid) {
                        const entryData = {
                            id: Date.now(),
                            title: title.value.trim(),
                            description: description.value.trim(),
                            progress: parseInt(progress.value),
                            status: status.value,
                            date: new Date().toISOString()
                        };
                        
                        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
                        saveDiaryEntry(entryData);
                        
                        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
                        addDiaryEntryToPage(entryData);
                        
                        // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
                        addEntryForm.reset();
                        progressValue.textContent = '50%';
                        progressInput.setAttribute('aria-valuenow', '50');
                        
                        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        closeDiaryModal();
                        
                        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                        showNotification('‚úì –ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!', 'success');
                    } else {
                        if (firstInvalidField) {
                            firstInvalidField.focus();
                            announceToScreenReader('–§–æ—Ä–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –∏—Ö.');
                        }
                    }
                });
            }

            // ========== –§–£–ù–ö–¶–ò–ò LOCALSTORAGE ==========

            function saveDiaryEntry(entryData) {
                let entries = JSON.parse(localStorage.getItem('diaryEntries')) || [];
                entries.unshift(entryData);
                localStorage.setItem('diaryEntries', JSON.stringify(entries));
            }

            function loadDiaryEntries() {
                if (!entriesList) return;
                let entries = JSON.parse(localStorage.getItem('diaryEntries')) || [];
                entries.forEach(entry => {
                    addDiaryEntryToPage(entry, false);
                });
            }

            function deleteDiaryEntry(id) {
                let entries = JSON.parse(localStorage.getItem('diaryEntries')) || [];
                entries = entries.filter(entry => entry.id !== id);
                localStorage.setItem('diaryEntries', JSON.stringify(entries));
            }

            // ========== –§–£–ù–ö–¶–ò–ò –ò–ù–¢–ï–†–§–ï–ô–°–ê ==========

            function openDiaryModal() {
                addEntryModal.removeAttribute('hidden');
                addEntryModal.setAttribute('aria-hidden', 'false');
                document.body.style.overflow = 'hidden';
                
                const modalContent = addEntryModal.querySelector('.modal__content');
                if (modalContent) {
                    setTimeout(() => modalContent.focus(), 100);
                }
                
                announceToScreenReader('–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –æ—Ç–∫—Ä—ã—Ç–æ');
            }

            function closeDiaryModal() {
                addEntryModal.setAttribute('hidden', '');
                addEntryModal.setAttribute('aria-hidden', 'true');
                document.body.style.overflow = '';
                
                document.querySelectorAll('.error-message').forEach(el => el.remove());
                document.querySelectorAll('.input-error').forEach(el => el.classList.remove('input-error'));
                
                addEntryBtn.focus();
                announceToScreenReader('–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∑–∞–∫—Ä—ã—Ç–æ');
            }

            function showError(input, message) {
                input.classList.add('input-error');
                input.setAttribute('aria-invalid', 'true');
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error-message';
                errorDiv.setAttribute('role', 'alert');
                errorDiv.textContent = message;
                input.parentElement.appendChild(errorDiv);
            }

            function addDiaryEntryToPage(data, animate = true) {
                const newEntry = document.createElement('article');
                newEntry.className = animate ? 'diary-entry diary-entry--new' : 'diary-entry';
                newEntry.setAttribute('data-entry-id', data.id);
                newEntry.setAttribute('role', 'listitem');
                
                const statusClass = data.status === 'completed' ? 'status--completed' : 'status--progress';
                const statusText = data.status === 'completed' ? '‚úì –ó–∞–≤–µ—Ä—à–µ–Ω–æ' : '‚è≥ –í –ø—Ä–æ—Ü–µ—Å—Å–µ';
                
                const entryDate = new Date(data.date);
                const formattedDate = entryDate.toLocaleDateString('ru-RU', { 
                    day: 'numeric', 
                    month: 'long', 
                    year: 'numeric' 
                });
                
                const isoDate = entryDate.toISOString().split('T')[0];
                
                newEntry.innerHTML = `
                    <div class="diary-entry__header">
                        <h3 class="diary-entry__title">${escapeHtml(data.title)}</h3>
                        <div class="diary-entry__actions">
                            <span class="diary-entry__status ${statusClass}">${statusText}</span>
                            <button class="delete-entry-btn" data-id="${data.id}" aria-label="–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å ${escapeHtml(data.title)}" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å">
                                <span aria-hidden="true">üóëÔ∏è</span>
                            </button>
                        </div>
                    </div>
                    <p class="diary-entry__date"><time datetime="${isoDate}">${formattedDate}</time></p>
                    <p class="diary-entry__description">${escapeHtml(data.description)}</p>
                    <div class="diary-entry__progress">
                        <div class="progress-bar" role="progressbar" aria-valuenow="${data.progress}" aria-valuemin="0" aria-valuemax="100" aria-label="–ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${data.progress} –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤">
                            <div class="progress-bar__fill" style="--progress: ${data.progress}%;"></div>
                        </div>
                    </div>
                `;
                
                entriesList.prepend(newEntry);
                
                if (animate) {
                    setTimeout(() => {
                        newEntry.classList.add('diary-entry--show');
                    }, 10);
                }
                
                const deleteBtn = newEntry.querySelector('.delete-entry-btn');
                deleteBtn.addEventListener('click', function() {
                    const entryId = parseInt(this.getAttribute('data-id'));
                    
                    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å?')) {
                        deleteDiaryEntry(entryId);
                        newEntry.style.opacity = '0';
                        newEntry.style.transform = 'translateX(-20px)';
                        setTimeout(() => {
                            newEntry.remove();
                            showNotification('üóëÔ∏è –ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞', 'info');
                            announceToScreenReader('–ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –¥–Ω–µ–≤–Ω–∏–∫–∞');
                        }, 300);
                    }
                });
            }

            function escapeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
        });
    </script>
</body>
</html>
